packetbeat报错如下：

fatal error: concurrent map iteration and map write

goroutine 77 [running]:
runtime.throw(0x15a3306, 0x26)
        /usr/lib/golang/src/runtime/panic.go:608 +0x72 fp=0xc001f136b0 sp=0xc001f13680 pc=0x93aa52
runtime.mapiternext(0xc001f13770)
        /usr/lib/golang/src/runtime/map.go:790 +0x525 fp=0xc001f13738 sp=0xc001f136b0 pc=0x91d4e5
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.foldMapInterface(0xc0012e1b00, 0x13f1e60, 0xc0016bac00, 0xc0016bac00, 0x15d30a8)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_map.go:34 +0xea fp=0xc001f137e0 sp=0xc001f13738 pc=0xeebbaa
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.foldInterfaceValue(0xc0012e1b00, 0x14fc680, 0xc0016bac00, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold.go:89 +0x361 fp=0xc001f13870 sp=0xc001f137e0 pc=0xee9ba1
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.foldMapInlineInterface(0xc0012e1b00, 0x14fc680, 0xc002015318, 0x95, 0x14fc680, 0xc002015318)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_map_inline.generated.go:44 +0x153 fp=0xc001f13928 sp=0xc001f13870 pc=0xeec733
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.makeFieldInlineFold.func1(0xc0012e1b00, 0x146eda0, 0xc002015300, 0x99, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_reflect.go:292 +0x86 fp=0xc001f13978 sp=0xc001f13928 pc=0xf353c6
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.makeFieldsFold.func1(0xc0012e1b00, 0x146eda0, 0xc002015300, 0x99, 0x0, 0x146eda0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_reflect.go:177 +0x88 fp=0xc001f139d0 sp=0xc001f13978 pc=0xf351e8
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.makeStructFold.func1(0xc0012e1b00, 0x146eda0, 0xc002015300, 0x99, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_reflect.go:167 +0x95 fp=0xc001f13a18 sp=0xc001f139d0 pc=0xf350e5
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.foldAnyReflect(0xc0012e1b00, 0x146eda0, 0xc002015300, 0x99, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold_reflect.go:511 +0xb9 fp=0xc001f13a58 sp=0xc001f13a18 pc=0xef2169
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.foldInterfaceValue(0xc0012e1b00, 0x146eda0, 0xc002015300, 0xc002015300, 0xc002015300)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold.go:92 +0x2e6 fp=0xc001f13ae8 sp=0xc001f13a58 pc=0xee9b26
github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype.(*Iterator).Fold(0xc0012e1b00, 0x146eda0, 0xc002015300, 0xc002015300, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/elastic/go-structform/gotype/fold.go:69 +0x41 fp=0xc001f13b20 sp=0xc001f13ae8 pc=0xee9811
github.com/elastic/beats/libbeat/outputs/elasticsearch.(*jsonEncoder).AddRaw(0xc0012dcc90, 0x1451340, 0xc002390800, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/elasticsearch/enc.go:96 +0x30c fp=0xc001f13c20 sp=0xc001f13b20 pc=0xf5768c
github.com/elastic/beats/libbeat/outputs/elasticsearch.(*jsonEncoder).Add(0xc0012dcc90, 0x143fca0, 0xc001b85c80, 0x1451340, 0xc002390800, 0xc001b85c80, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/elasticsearch/enc.go:116 +0xfb fp=0xc001f13c60 sp=0xc001f13c20 pc=0xf577bb
github.com/elastic/beats/libbeat/outputs/elasticsearch.bulkEncodePublishRequest(0x7fb024287308, 0xc0012dcc90, 0x16a1820, 0xc001751700, 0x0, 0xc002390000, 0x25, 0x800, 0xc0015e8ae0, 0xc0020713e0, ...)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/elasticsearch/client.go:355 +0x1ac fp=0xc001f13d60 sp=0xc001f13c60 pc=0xf516ac
github.com/elastic/beats/libbeat/outputs/elasticsearch.(*Client).publishEvents(0xc0012fcc60, 0xc002390000, 0x25, 0x800, 0xc001d18ae0, 0xc001d18ae0, 0x0, 0xc0004f8d80, 0xc0004f8e08)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/elasticsearch/client.go:286 +0x14b fp=0xc001f13e98 sp=0xc001f13d60 pc=0xf50e2b
github.com/elastic/beats/libbeat/outputs/elasticsearch.(*Client).Publish(0xc0012fcc60, 0x16bba40, 0xc00150a140, 0xc00175a600, 0xc001f13f78)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/elasticsearch/client.go:253 +0x43 fp=0xc001f13f00 sp=0xc001f13e98 pc=0xf50c43
github.com/elastic/beats/libbeat/outputs.(*backoffClient).Publish(0xc00173fb20, 0x16bba40, 0xc00150a140, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/backoff.go:43 +0x4b fp=0xc001f13f48 sp=0xc001f13f00 pc=0xec76ab
github.com/elastic/beats/libbeat/publisher/pipeline.(*netClientWorker).run(0xc001751ac0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/output.go:90 +0x1c1 fp=0xc001f13fd8 sp=0xc001f13f48 pc=0xf7f861
runtime.goexit()
        /usr/lib/golang/src/runtime/asm_amd64.s:1333 +0x1 fp=0xc001f13fe0 sp=0xc001f13fd8 pc=0x96b421
created by github.com/elastic/beats/libbeat/publisher/pipeline.makeClientWorker
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/output.go:31 +0xe3

goroutine 1 [semacquire, 7 minutes]:
sync.runtime_Semacquire(0xc000472428)
        /usr/lib/golang/src/runtime/sema.go:56 +0x39
sync.(*WaitGroup).Wait(0xc000472420)
        /usr/lib/golang/src/sync/waitgroup.go:130 +0x64
github.com/elastic/beats/packetbeat/beater.(*packetbeat).Run(0xc00147c000, 0xc0016ee000, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/beater/packetbeat.go:209 +0x176
github.com/elastic/beats/libbeat/cmd/instance.(*Beat).launch(0xc0016ee000, 0x15d2a80, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/cmd/instance/beat.go:318 +0x437
github.com/elastic/beats/libbeat/cmd/instance.Run.func1(0x157a512, 0xa, 0x157a512, 0xa, 0x0, 0x0, 0x15d2a80, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/cmd/instance/beat.go:144 +0xed
github.com/elastic/beats/libbeat/cmd/instance.Run(0x157a512, 0xa, 0x157a512, 0xa, 0x0, 0x0, 0x15d2a80, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/cmd/instance/beat.go:145 +0x71
github.com/elastic/beats/libbeat/cmd.genRunCmd.func1(0xc001277900, 0xc0016c8960, 0x0, 0xa)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/cmd/run.go:19 +0x60
github.com/elastic/beats/vendor/github.com/spf13/cobra.(*Command).execute(0xc001277900, 0xc0000300c0, 0xa, 0xa, 0xc001277900, 0xc0000300c0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/spf13/cobra/command.go:704 +0x2d3
github.com/elastic/beats/vendor/github.com/spf13/cobra.(*Command).ExecuteC(0xc001277900, 0xc00003a0b8, 0x0, 0x157a512)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/spf13/cobra/command.go:785 +0x2dc
github.com/elastic/beats/vendor/github.com/spf13/cobra.(*Command).Execute(0xc001277900, 0xc001647f88, 0xc00003a0b8)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/spf13/cobra/command.go:738 +0x2b
main.main()
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/main.go:13 +0x2f

goroutine 41 [syscall, 7 minutes]:
os/signal.signal_recv(0x0)
        /usr/lib/golang/src/runtime/sigqueue.go:139 +0x9c
os/signal.loop()
        /usr/lib/golang/src/os/signal/signal_unix.go:23 +0x22
created by os/signal.init.0
        /usr/lib/golang/src/os/signal/signal_unix.go:29 +0x41

goroutine 73 [select]:
github.com/elastic/beats/libbeat/publisher/queue/memqueue.(*bufferingEventLoop).run(0xc0012e8280)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/eventloop.go:299 +0x1f4
github.com/elastic/beats/libbeat/publisher/queue/memqueue.NewBroker.func1(0xc0017684d0, 0x16a7580, 0xc0012e8280)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/broker.go:139 +0x5d
created by github.com/elastic/beats/libbeat/publisher/queue/memqueue.NewBroker
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/broker.go:137 +0x368

goroutine 74 [select]:
github.com/elastic/beats/libbeat/publisher/queue/memqueue.(*ackLoop).run(0xc0012da280)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/ackloop.go:43 +0x10f
github.com/elastic/beats/libbeat/publisher/queue/memqueue.NewBroker.func2(0xc0017684d0, 0xc0012da280)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/broker.go:143 +0x57
created by github.com/elastic/beats/libbeat/publisher/queue/memqueue.NewBroker
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/broker.go:141 +0x39a

goroutine 75 [select]:
github.com/elastic/beats/libbeat/publisher/queue/memqueue.(*consumer).Get(0xc00173fd80, 0x32, 0x3, 0x2, 0xc00150a100, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/queue/memqueue/consume.go:50 +0xf5
github.com/elastic/beats/libbeat/publisher/pipeline.(*eventConsumer).loop(0xc0012da320, 0x16a75c0, 0xc00173fd80)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/consumer.go:150 +0x3c7
created by github.com/elastic/beats/libbeat/publisher/pipeline.newEventConsumer
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/consumer.go:60 +0x152

goroutine 76 [select, 7 minutes]:
github.com/elastic/beats/libbeat/publisher/pipeline.(*retryer).loop(0xc001751a80)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/retry.go:114 +0x1ac
created by github.com/elastic/beats/libbeat/publisher/pipeline.newRetryer
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/publisher/pipeline/retry.go:69 +0x11e

goroutine 51 [select]:
github.com/elastic/beats/packetbeat/publish.(*TransactionPublisher).worker(0xc00174e4b0, 0xc0012f6300, 0x16afe80, 0xc0012f62a0)
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/publish/publish.go:101 +0x103
created by github.com/elastic/beats/packetbeat/publish.(*TransactionPublisher).CreateReporter
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/publish/publish.go:89 +0x244

goroutine 52 [select]:
github.com/elastic/beats/libbeat/monitoring/report/log.(*reporter).snapshotLoop(0xc0016bb290)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/monitoring/report/log/log.go:108 +0x31f
github.com/elastic/beats/libbeat/monitoring/report/log.MakeReporter.func1(0xc0016bb290)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/monitoring/report/log/log.go:86 +0x53
created by github.com/elastic/beats/libbeat/monitoring/report/log.MakeReporter
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/monitoring/report/log/log.go:84 +0x147

goroutine 54 [chan receive, 7 minutes]:
github.com/elastic/beats/libbeat/service.HandleSignals.func1(0xc0012f6600, 0xc00139f190, 0xc000472400, 0xc00122ebc0)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/service/service.go:33 +0x38
created by github.com/elastic/beats/libbeat/service.HandleSignals
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/service/service.go:32 +0xf9

goroutine 56 [syscall]:
github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap._Cfunc_pcap_next_ex(0x7fafec000c40, 0xc0012deda8, 0xc0012dedb0, 0x0)
        _cgo_gotypes.go:598 +0x4d
github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap.(*Handle).getNextBufPtrLocked.func1(0x7fafec000c40, 0xc0012deda8, 0xc0012dedb0, 0xc0004b2000)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap/pcap.go:330 +0x14e
github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap.(*Handle).getNextBufPtrLocked(0xc0012ded80, 0xc002763e50, 0xc001761ce0, 0xc00127a1e0)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap/pcap.go:330 +0x64
github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap.(*Handle).ReadPacketData(0xc0012ded80, 0xc001bf1b30, 0x1d7, 0x1e7, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
        /home/xjx/elk/src/github.com/elastic/beats/vendor/github.com/tsg/gopacket/pcap/pcap.go:284 +0x74
github.com/elastic/beats/packetbeat/sniffer.(*Sniffer).Run(0xc000030630, 0x0, 0x0)
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/sniffer/sniffer.go:166 +0x275
github.com/elastic/beats/packetbeat/beater.(*packetbeat).Run.func2(0xc000472420, 0xc00147c000, 0xc0012f66c0)
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/beater/packetbeat.go:202 +0x60
created by github.com/elastic/beats/packetbeat/beater.(*packetbeat).Run
        /home/xjx/elk/src/github.com/elastic/beats/packetbeat/beater/packetbeat.go:199 +0x129

goroutine 58 [select]:
github.com/elastic/beats/libbeat/common.(*Cache).StartJanitor.func1(0xc00174e550, 0xc0012dee40)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/common/cache.go:219 +0xba
created by github.com/elastic/beats/libbeat/common.(*Cache).StartJanitor
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/common/cache.go:217 +0x92

goroutine 99 [IO wait]:
internal/poll.runtime_pollWait(0x7fb02b9c3f00, 0x72, 0xc001718a28)
        /usr/lib/golang/src/runtime/netpoll.go:173 +0x66
internal/poll.(*pollDesc).wait(0xc0016df618, 0x72, 0xffffffffffffff00, 0x16a4b40, 0x21098d8)
        /usr/lib/golang/src/internal/poll/fd_poll_runtime.go:85 +0x9a
internal/poll.(*pollDesc).waitRead(0xc0016df618, 0xc0013fc000, 0x1000, 0x1000)
        /usr/lib/golang/src/internal/poll/fd_poll_runtime.go:90 +0x3d
internal/poll.(*FD).Read(0xc0016df600, 0xc0013fc000, 0x1000, 0x1000, 0x0, 0x0, 0x0)
        /usr/lib/golang/src/internal/poll/fd_unix.go:169 +0x179
net.(*netFD).Read(0xc0016df600, 0xc0013fc000, 0x1000, 0x1000, 0xc001499258, 0xc001762da0, 0xc0016be078)
        /usr/lib/golang/src/net/fd_unix.go:202 +0x4f
net.(*conn).Read(0xc00130a0c0, 0xc0013fc000, 0x1000, 0x1000, 0x0, 0x0, 0x0)
        /usr/lib/golang/src/net/net.go:177 +0x68
github.com/elastic/beats/libbeat/outputs/transport.(*statsConn).Read(0xc0013c8760, 0xc0013fc000, 0x1000, 0x1000, 0xc0013f80c0, 0xc001d18ae0, 0xc001718cd4)
        /home/xjx/elk/src/github.com/elastic/beats/libbeat/outputs/transport/stats.go:27 +0x55
net/http.(*persistConn).Read(0xc001387d40, 0xc0013fc000, 0x1000, 0x1000, 0xc001718c70, 0x913665, 0xc0013f80c0)
        /usr/lib/golang/src/net/http/transport.go:1497 +0x75
bufio.(*Reader).fill(0xc0013ba7e0)
        /usr/lib/golang/src/bufio/bufio.go:100 +0x10f
bufio.(*Reader).Peek(0xc0013ba7e0, 0x1, 0x0, 0x0, 0x1, 0xc001b66300, 0x0)
        /usr/lib/golang/src/bufio/bufio.go:132 +0x3f
net/http.(*persistConn).readLoop(0xc001387d40)
        /usr/lib/golang/src/net/http/transport.go:1645 +0x1a2
created by net/http.(*Transport).dialConn
        /usr/lib/golang/src/net/http/transport.go:1338 +0x941

goroutine 100 [select]:
net/http.(*persistConn).writeLoop(0xc001387d40)
        /usr/lib/golang/src/net/http/transport.go:1885 +0x113
created by net/http.(*Transport).dialConn
        /usr/lib/golang/src/net/http/transport.go:1339 +0x966
